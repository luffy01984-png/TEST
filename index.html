<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renault Trucks CE - Partenaires</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8fafc;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #dc2626;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #b91c1c;
        }

        /* Hero Pattern */
        .hero-pattern {
            background-color: #dc2626;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        /* Category Accordion Transitions */
        .category-content-modern {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .category-header-modern {
            cursor: pointer;
            padding: 1.5rem;
            background: white;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .category-header-modern:hover {
            background-color: #fef2f2;
        }

        .category-header-modern.active {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
        }

        .category-header-modern:active {
            transform: scale(0.98);
        }

        /* Glassmorphism for Modal */
        .glass-modal {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        /* Staggered Slide Up Animation */
        @keyframes slideUpFade {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .partner-card-animate {
            opacity: 0;
            /* Start hidden */
            animation: slideUpFade 0.5s ease-out forwards;
        }
    </style>
</head>

<body class="text-gray-800">

    <!-- Splash Screen -->
    <div id="splash" class="fixed inset-0 z-50 bg-white flex items-center justify-center hidden">
        <div class="text-center animate-fade-in">
            <h1 class="text-4xl font-bold text-red-600 mb-4">Renault Trucks CE</h1>
            <p class="text-gray-500">Chargement des partenaires...</p>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-white font-bold">R
                </div>
                <span class="font-bold text-lg text-gray-800">CE Renault Trucks</span>
            </div>
            <div class="flex gap-4 text-sm font-medium">
                <a href="#" id="nav-partenaires"
                    class="text-gray-600 hover:text-red-600 transition-colors">Partenaires</a>
                <a href="#" id="nav-mentions" class="text-gray-600 hover:text-red-600 transition-colors">Mentions</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero-pattern text-white py-16 px-4 text-center mb-8">
        <h1 class="text-3xl md:text-5xl font-bold mb-4 animate-fade-in">Nos Partenaires</h1>
        <p class="text-red-100 text-lg max-w-2xl mx-auto animate-fade-in" style="animation-delay: 0.1s;">
            D√©couvrez les avantages exclusifs r√©serv√©s aux employ√©s Renault Trucks.
        </p>
    </header>

    <!-- Categories Container -->
    <main id="categories" class="container mx-auto px-4 pb-16 min-h-screen">
        <div id="categories-list"
            class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100">
            <!-- Categories will be injected here by JavaScript -->
        </div>
    </main>

    <!-- Mentions Section -->
    <footer id="mentions" class="bg-gray-900 text-gray-400 py-12">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-white text-xl font-bold mb-4">Mentions L√©gales</h2>
            <p class="mb-4 text-sm">
                Ce site est √† destination exclusive des employ√©s du CE Renault Trucks.
                Les offres sont sujettes √† modification sans pr√©avis.
            </p>
            <p class="text-xs">&copy; 2024 CE Renault Trucks. Tous droits r√©serv√©s.</p>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn"
        class="fixed bottom-6 right-6 bg-red-600 text-white p-3 rounded-full shadow-lg hover:bg-red-700 transition-all transform hover:scale-110 hidden z-30">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
        </svg>
    </button>

    <!-- Modal -->
    <div id="imageModal" class="fixed inset-0 z-50 glass-modal hidden items-center justify-center p-4">
        <div class="relative max-w-4xl w-full max-h-[90vh] flex flex-col items-center">
            <button id="closeModalBtn" class="absolute -top-10 right-0 text-white hover:text-red-400 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <img id="modalImg" src="" alt="Partenaire"
                class="max-w-full max-h-[80vh] rounded-lg shadow-2xl object-contain bg-white">
        </div>
    </div>

    <!-- Data Script -->
    <script>
        // ===== DONN√âES DES PARTENAIRES =====
        const partnersData = {
            resto: {
                title: 'üçΩÔ∏è Restaurants',
                partners: [
                    { name: '1001 Pizzas', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/1001pizza.webp' },
                    { name: 'AllPizza&Pasta Buffet', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/buffetpizza.webp' },
                    { name: 'Au Bureau', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/AuBureau.webp' },
                    { name: 'BollyFood', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Bollyfood.webp' },
                    { name: 'COCO Bresil', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/CoCoBresil.webp' },
                    { name: 'Food Truck Fermier', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/food%20truck%20fermier.webp' },
                    { name: 'Le Loft', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/LeLoft.webp' },
                    { name: 'Le Marrakech', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Lemarrakech1.webp' },
                    { name: 'Leon', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Leon.webp' },
                    { name: 'Pasta&Pizza', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Pasta%26Pizza.webp' },
                    { name: "Rod's", url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Rods.webp' },
                    { name: 'WokAna', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/WokAna.webp' }
                ]
            },
            gout: {
                title: 'ü•ñ Artisans du Go√ªt',
                partners: [
                    { name: "Boucherie Andr√©", url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/boucherie_andr√©.webp' },
                    { name: 'Caf√© Allombert', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/CafeAllombert.webp' },
                    { name: 'Cerdon AOC Gabin Grobon', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Cerdon.webp' },
                    { name: "Grain d'pain", url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Graindpainnew.webp' },
                    { name: 'Janny fruits', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/janny%20fruits.webp' },
                    { name: 'La Mie Caline', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/lamiecaline.webp' },
                    { name: 'Les P√©pites Bressanes', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Les_pepites_bressanes_new.webp' },
                    { name: 'LouPan', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Loupannew.webp' },
                    { name: 'Monts et Terroir', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Monts%20et%20Terroir.webp' },
                    { name: 'Mouret Traiteur', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Mouret.webp' },
                    { name: 'Paella de Valencia', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/La-Paella.webp' },
                    { name: 'Papilles Ain Solites', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Papilles_Ain_solites.webp' }
                ]
            },
            maison: {
                title: 'üè† Maison & Travaux',
                subcategories: [
                    {
                        name: 'Achat & Financement',
                        partners: [
                            { name: 'Himosty', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/hymosti.webp' },
                            { name: 'La centrale du Financement', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/lacentralefinancenew.webp' },
                            { name: 'MeilleurTaux', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Meilleur-taux.webp' }
                        ]
                    },
                    {
                        name: 'Equipement & Renovation',
                        partners: [
                            { name: 'A.F Energies', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/AfrEnergie.webp' },
                            { name: 'Carrelage BRESSAN', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/CarrelageBressan.webp' },
                            { name: 'Chaleur et bois', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/chaleur%20et%20bois.webp' },
                            { name: 'Habitat Confort', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/habitat%20confort.webp' },
                            { name: 'Home Elec', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Homeelec.webp' },
                            { name: 'Pia Gazil', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/PiaGazil.webp' },
                            { name: 'Sikkens Solutions', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/sikkens.webp' }
                        ]
                    },
                    {
                        name: 'Cuisine/Electromenager',
                        partners: [
                            { name: 'Conforama', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Conforama.webp' },
                            { name: 'Cuisinella', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Cuisinella.webp' },
                            { name: 'Ecocuisine', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/ecocuisine.webp' },
                            { name: 'ID Plan', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Idplan.webp' },
                            { name: 'Schmidt', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/schmidt.webp' }
                        ]
                    },
                    {
                        name: 'üåª Jardin & Ext√©rieur',
                        partners: [
                            { name: 'Arbres & CO', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Arbres_Co.webp' },
                            { name: 'DSCV Frelons', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/DSCV.webp' },
                            { name: 'Fred Multi Services', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/FredMultiServices.webp' },
                            { name: 'IrriPiscine', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Irripiscine.webp' },
                            { name: 'Les Coques de Bresse', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Les%20coqs%20de%20Bresse.webp' },
                            { name: 'Parisot Motoculture', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/michel%20parisot.webp' }
                        ]
                    }
                ]
            },
            auto: {
                title: 'üöó Automobile',
                partners: [
                    { name: '0‚Ç¨ PareBrise', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/images/0%E2%82%AC_PareBrise.webp' },
                    { name: '123 Parebrise', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/123%20parebrise.webp' },
                    { name: 'APC', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/apc.webp' },
                    { name: 'Autosur', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Autosur_new.webp' },
                    { name: 'CtEasy.com', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/CtEasy.com.webp' },
                    { name: 'Renault', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/renault.webp' },
                    { name: 'RJ Auto Services', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/RJAuto.webp' },
                    { name: 'Speedy', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Speedynew.webp' },
                    { name: 'Vulco', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Vulco.webp' }
                ]
            },
            vetement: {
                title: 'üëî Pr√™t-√†-Porter',
                partners: [
                    { name: 'Bello', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Bello.webp' },
                    { name: 'Dessous_Dessus', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Dessous_dessus.webp' },
                    { name: 'Gambetta', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Gambetta.webp' }
                ]
            },
            beaute: {
                title: 'üíÖ Beaut√© / Bien-√™tre',
                partners: [
                    { name: '15th Avenue Coiffure', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/15thAvenuenew.webp' },
                    { name: 'Galerie102', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Gallerie%20102.webp' },
                    { name: 'Glow Ritual', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/GlowRitual.webp' },
                    { name: 'Le Salon des Hommes', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/LeSalondeshommes.webp' },
                    { name: 'Renaissance Coiffure', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Renaissance.webp' }
                ]
            },
            culture: {
                title: 'üé≠ Culture / Loisirs',
                partners: [
                    { name: 'D√©clic Ludik', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/declic-ludik.webp' },
                    { name: 'D√©fi01', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Defi01.webp' },
                    { name: 'La Tannerie', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/LaTannerie.webp' },
                    { name: 'Librairie du Th√©√¢tre', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Librairie_papeterie.webp' },
                    { name: 'Montbarbon', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Montbarbonnew.webp' }
                ]
            },
            quotidien: {
                title: 'üõçÔ∏è Quotidien',
                partners: [
                    { name: 'A Fleur de pot', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/a%20fleur%20de%20pot.webp' },
                    { name: "Ainter'Job", url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Ainterjob.webp' },
                    { name: 'Ca Cr√©e Ca Cause', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Ca-cree-.webp' },
                    { name: 'Concept_Optique', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/ConceptOptique.webp' },
                    { name: 'Optique LAFAYETTE', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Optiquelafayette.webp' },
                    { name: 'La Rek1que', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/la%20rek1ke.webp' },
                    { name: 'Shiva', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Shivaa.webp' }
                ]
            },
            enfants: {
                title: 'üë∂ Autour de l\'Enfant',
                partners: [
                    { name: 'KingJouet', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/KingJouet.webp' },
                    { name: 'LudiLucky', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/ludylucky.webp' }
                ]
            },
            animaux: {
                title: 'üêæ Animaux',
                partners: [
                    { name: 'Espace Passion Animalerie', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/espace_passon_new.webp' },
                    { name: 'Food Animo', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/food%20animo.webp' }
                ]
            },
            voyages: {
                title: '‚úàÔ∏è H√¥tels / Voyages',
                partners: [
                    { name: 'Greet Hotels', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Greethotel.webp' },
                    { name: 'Le Griffon d\'Or', url: 'https://raw.githubusercontent.com/luffy01984-png/Renault-trucks-CE/main/assets/assets/Le-griffon.webp' }
                ]
            }
        };
    </script>

    <!-- Logic Script -->
    <script>
        // ===== AFFICHER TOUTES LES CAT√âGORIES =====
        function renderAllCategories() {
            const categoriesList = document.getElementById('categories-list');
            if (!categoriesList) return;

            Object.keys(partnersData).forEach(categoryId => {
                const category = partnersData[categoryId];

                const section = document.createElement('div');
                section.className = 'category-section-modern group';

                const header = document.createElement('div');
                header.className = 'category-header-modern';
                header.innerHTML = `
              <h3 class="text-xl font-bold flex items-center gap-3">
                ${category.title}
              </h3>
              <span class="arrow transition-transform duration-300">‚ñ∂</span>
            `;

                const content = document.createElement('div');
                content.className = 'category-content-modern';

                if (category.subcategories) {
                    // Cat√©gorie avec sous-cat√©gories
                    const subcategorySection = document.createElement('div');
                    subcategorySection.className = 'subcategory-section space-y-2';

                    category.subcategories.forEach(subcat => {
                        const subBtn = document.createElement('button');
                        subBtn.className = 'subcategory-btn w-full text-left p-3 rounded-lg bg-gray-50 hover:bg-red-50 transition-colors flex justify-between items-center font-medium';
                        subBtn.innerHTML = `<span>${subcat.name}</span><span class="transition-transform duration-300">‚ñ∂</span>`;

                        const subContent = document.createElement('div');
                        subContent.className = 'subcategory-content hidden';

                        const grid = document.createElement('div');
                        grid.className = 'partners-grid grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mt-4';

                        subcat.partners.forEach(partner => {
                            const card = createPartnerCard(partner);
                            grid.appendChild(card);
                        });

                        subContent.appendChild(grid);
                        subcategorySection.appendChild(subBtn);
                        subcategorySection.appendChild(subContent);

                        subBtn.addEventListener('click', () => {
                            const arrow = subBtn.querySelector('span:last-child');
                            subContent.classList.toggle('hidden');
                            subBtn.classList.toggle('active');

                            if (!subContent.classList.contains('hidden')) {
                                arrow.style.transform = 'rotate(90deg)';
                            } else {
                                arrow.style.transform = 'rotate(0deg)';
                            }
                        });
                    });

                    content.appendChild(subcategorySection);
                } else {
                    // Cat√©gorie simple
                    const grid = document.createElement('div');
                    grid.className = 'partners-grid grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4';

                    category.partners.forEach(partner => {
                        const card = createPartnerCard(partner);
                        grid.appendChild(card);
                    });

                    content.appendChild(grid);
                }

                // Gestion du clic sur le header
                header.addEventListener('click', () => {
                    const arrow = header.querySelector('.arrow');
                    content.classList.toggle('open');
                    header.classList.toggle('active');

                    if (content.classList.contains('open')) {
                        arrow.style.transform = 'rotate(90deg)';
                        content.style.maxHeight = content.scrollHeight + 'px';

                        // Trigger animation for cards
                        const cards = content.querySelectorAll('.partner-card-new');
                        cards.forEach((card, index) => {
                            card.classList.remove('partner-card-animate'); // Reset
                            void card.offsetWidth; // Trigger reflow
                            card.classList.add('partner-card-animate');
                            card.style.animationDelay = `${index * 50}ms`;
                        });
                    } else {
                        arrow.style.transform = 'rotate(0deg)';
                        content.style.maxHeight = '0';
                    }
                });

                section.appendChild(header);
                section.appendChild(content);
                categoriesList.appendChild(section);
            });
        }

        function createPartnerCard(partner) {
            const card = document.createElement('div');
            card.className = 'partner-card-new bg-white p-4 rounded-xl shadow-sm hover:shadow-md transition-all cursor-pointer border border-gray-100 hover:border-red-200 flex items-center justify-center text-center h-24';
            card.onclick = () => openModal(partner.url);
            card.innerHTML = `<h3 class="font-semibold text-gray-800 text-sm">${partner.name}</h3>`;
            return card;
        }

        // ===== MODAL =====
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImg');
        const closeModalBtn = document.getElementById('closeModalBtn');

        function openModal(url) {
            if (!modal || !modalImg) return;
            modalImg.src = url;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            history.pushState({ modalOpen: true }, "");
        }

        function closeModal() {
            if (!modal) return;
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            if (history.state && history.state.modalOpen) history.back();
        }

        if (modal) {
            modalImg.addEventListener('click', closeModal);
            if (closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
        }
        window.addEventListener('popstate', () => { if (modal && !modal.classList.contains('hidden')) closeModal(); });

        // ===== NAVIGATION =====
        const navPartenaires = document.getElementById('nav-partenaires');
        const navMentions = document.getElementById('nav-mentions');

        if (navPartenaires) {
            navPartenaires.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('categories').scrollIntoView({ behavior: 'smooth' });
            });
        }

        if (navMentions) {
            navMentions.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('mentions').scrollIntoView({ behavior: 'smooth' });
            });
        }

        // ===== SCROLL TO TOP =====
        const scrollTopBtn = document.getElementById('scrollTopBtn');
        if (scrollTopBtn) {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    scrollTopBtn.classList.remove('hidden');
                    scrollTopBtn.classList.add('flex');
                } else {
                    scrollTopBtn.classList.add('hidden');
                    scrollTopBtn.classList.remove('flex');
                }
            });

            scrollTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', () => {
            // Splash Screen
            const splash = document.getElementById('splash');
            const SPLASH_ENABLED = false; // Set to true to enable

            if (splash) {
                if (SPLASH_ENABLED) {
                    splash.classList.remove('hidden');
                    splash.classList.add('flex');
                    setTimeout(() => {
                        splash.style.opacity = '0';
                        splash.style.transition = 'opacity 0.8s ease';
                        setTimeout(() => {
                            splash.classList.add('hidden');
                            splash.classList.remove('flex');
                        }, 800);
                    }, 3000);
                } else {
                    splash.classList.add('hidden');
                }
            }

            renderAllCategories();

            // Service Worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/Renault-trucks-CE/service-worker.js')
                    .then(() => console.log('Service Worker enregistr√© ‚úî'))
                    .catch(err => console.error('SW: √âchec ‚ùå', err));
            }
        });
    </script>
</body>

</html>
