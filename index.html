<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Doodle Jump</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 100%);
            font-family: Arial, sans-serif;
            touch-action: none;
        }
        
        #gameCanvas {
            display: block;
            margin: 0 auto;
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 100%);
            max-width: 100vw;
            max-height: 100vh;
        }
        
        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
        }
        
        #gameOver h2 {
            margin-bottom: 20px;
            font-size: 32px;
        }
        
        #gameOver button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
        }
        
        #gameOver button:hover {
            background: #45a049;
        }
        
        #score {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            z-index: 10;
        }
        
        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 16px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="score">Score: 0</div>
    <div id="controls">
        Desktop: Arrow Keys or A/D<br>
        Mobile: Tilt device or tap sides
    </div>
    <canvas id="gameCanvas"></canvas>
    <div id="gameOver">
        <h2>Game Over!</h2>
        <p id="finalScore"></p>
        <button onclick="restartGame()">Play Again</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas size
        function resizeCanvas() {
            canvas.width = Math.min(window.innerWidth, 400);
            canvas.height = Math.min(window.innerHeight, 600);
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Game variables
        let score = 0;
        let gameRunning = true;
        let platforms = [];
        let cameraY = 0;
        
        // Player
        const player = {
            x: canvas.width / 2,
            y: canvas.height - 150,
            width: 50,
            height: 50,
            velocityX: 0,
            velocityY: 0,
            gravity: 0.4,
            jumpPower: -12,
            speed: 5,
            image: new Image()
        };
        
        player.image.src = 'https://raw.githubusercontent.com/luffy01984-png/TEST/main/chris.jpg';
        
        // Platform class
        class Platform {
            constructor(x, y, width, moving = false) {
                this.x = x;
                this.y = y;
                this.width = width;
                this.height = 15;
                this.moving = moving;
                this.direction = 1;
                this.speed = 2;
            }
            
            draw() {
                ctx.fillStyle = this.moving ? '#FF6B6B' : '#4CAF50';
                ctx.fillRect(this.x, this.y - cameraY, this.width, this.height);
                ctx.strokeStyle = '#2E7D32';
                ctx.lineWidth = 2;
                ctx.strokeRect(this.x, this.y - cameraY, this.width, this.height);
            }
            
            update() {
                if (this.moving) {
                    this.x += this.direction * this.speed;
                    if (this.x <= 0 || this.x + this.width >= canvas.width) {
                        this.direction *= -1;
                    }
                }
            }
        }
        
        // Initialize platforms
        function initPlatforms() {
            platforms = [];
            for (let i = 0; i < 8; i++) {
                const x = Math.random() * (canvas.width - 80);
                const y = canvas.height - 100 - i * 80;
                const moving = Math.random() > 0.7;
                platforms.push(new Platform(x, y, 80, moving));
            }
        }
        
        // Controls
        const keys = {};
        
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });
        
        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });
        
        // Touch controls
        let touchStartX = 0;
        canvas.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
        });
        
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touchX = e.touches[0].clientX;
            const diff = touchX - touchStartX;
            if (Math.abs(diff) > 5) {
                player.velocityX = diff > 0 ? player.speed : -player.speed;
            }
        });
        
        canvas.addEventListener('touchend', () => {
            player.velocityX = 0;
        });
        
        // Tap controls
        canvas.addEventListener('click', (e) => {
            const x = e.clientX - canvas.getBoundingClientRect().left;
            if (x < canvas.width / 2) {
                player.x -= 30;
            } else {
                player.x += 30;
            }
        });
        
        // Update player
        function updatePlayer() {
            // Horizontal movement
            if (keys['ArrowLeft'] || keys['a'] || keys['A']) {
                player.velocityX = -player.speed;
            } else if (keys['ArrowRight'] || keys['d'] || keys['D']) {
                player.velocityX = player.speed;
            } else if (!('ontouchstart' in window)) {
                player.velocityX = 0;
            }
            
            player.x += player.velocityX;
            
            // Wrap around screen
            if (player.x < -player.width) player.x = canvas.width;
            if (player.x > canvas.width) player.x = -player.width;
            
            // Vertical movement
            player.velocityY += player.gravity;
            player.y += player.velocityY;
            
            // Camera follow
            if (player.y < canvas.height / 2) {
                cameraY = player.y - canvas.height / 2;
            }
            
            // Check platform collision (only when falling)
            if (player.velocityY > 0) {
                platforms.forEach(platform => {
                    if (player.x + player.width > platform.x &&
                        player.x < platform.x + platform.width &&
                        player.y + player.height > platform.y &&
                        player.y + player.height < platform.y + platform.height + 10 &&
                        player.velocityY > 0) {
                        player.velocityY = player.jumpPower;
                        
                        // Update score
                        const currentScore = Math.floor(cameraY / 10);
                        if (currentScore > score) {
                            score = currentScore;
                            document.getElementById('score').textContent = 'Score: ' + score;
                        }
                    }
                });
            }
            
            // Generate new platforms
            if (cameraY > platforms[platforms.length - 1].y - canvas.height) {
                const x = Math.random() * (canvas.width - 80);
                const y = platforms[platforms.length - 1].y - 80;
                const moving = Math.random() > 0.7 + Math.min(score / 10000, 0.2);
                platforms.push(new Platform(x, y, 80, moving));
            }
            
            // Remove platforms that are off screen
            platforms = platforms.filter(p => p.y - cameraY < canvas.height + 100);
            
            // Game over
            if (player.y - cameraY > canvas.height) {
                gameRunning = false;
                document.getElementById('gameOver').style.display = 'block';
                document.getElementById('finalScore').textContent = 'Final Score: ' + score;
            }
        }
        
        // Draw everything
        function draw() {
            // Clear canvas
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw platforms
            platforms.forEach(platform => {
                platform.update();
                platform.draw();
            });
            
            // Draw player
            ctx.drawImage(player.image, player.x, player.y - cameraY, player.width, player.height);
        }
        
        // Game loop
        function gameLoop() {
            if (gameRunning) {
                updatePlayer();
                draw();
                requestAnimationFrame(gameLoop);
            }
        }
        
        // Restart game
        function restartGame() {
            score = 0;
            cameraY = 0;
            gameRunning = true;
            player.x = canvas.width / 2;
            player.y = canvas.height - 150;
            player.velocityX = 0;
            player.velocityY = 0;
            document.getElementById('score').textContent = 'Score: 0';
            document.getElementById('gameOver').style.display = 'none';
            initPlatforms();
            gameLoop();
        }
        
        // Start game
        initPlatforms();
        gameLoop();
    </script>
</body>
</html>
